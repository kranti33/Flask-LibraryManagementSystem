{% extends "base.html" %}
{% block content %}
<div class="container home">

    <h2 class="library-title">Library Books</h2>

    <!-- Search Bar -->
    <form method="GET" class="mb-4">
        <input type="text" name="search" placeholder="Search by title, author, genre" class="form-control" value="{{ request.args.get('search','') }}">
    </form>

    <div class="books-slider">
        {% set pastel = ['pastel-1','pastel-2','pastel-3','pastel-4'] %}
        {% for book in books %}
        <div class="book-card {{ pastel[loop.index0 % 4] }}">

            <div class="availability-badge {% if book.available %}available{% else %}unavailable{% endif %}"></div>

            <a href="{{ url_for('main.borrow', book_id=book.id) }}">
                <img src="{{ url_for('static', filename='images/books/' + (book.cover_image or 'default.png')) }}" alt="{{ book.title }}">
            </a>

            <a href="{{ url_for('main.borrow', book_id=book.id) }}" class="book-title">
                {{ book.title }}
            </a>

            <div class="book-author">{{ book.author }}</div>
            <div class="book-genre">{{ book.genre }}</div>

            {% if book.available %}
                <a href="{{ url_for('main.borrow', book_id=book.id) }}" class="borrow-btn">Borrow</a>
            {% else %}
                <button class="borrow-btn" disabled>Unavailable</button>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
